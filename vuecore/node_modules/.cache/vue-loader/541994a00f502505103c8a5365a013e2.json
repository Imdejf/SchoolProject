{"remainingRequest":"C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\src\\components\\admin\\ProductEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\src\\components\\admin\\ProductEditor.vue","mtime":1591692142633},{"path":"C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639426954311},{"path":"C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\node_modules\\babel-loader\\lib\\index.js","mtime":1639426955312},{"path":"C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639426954311},{"path":"C:\\Users\\jablo\\Desktop\\vuecore\\vuecore\\node_modules\\vue-loader\\lib\\index.js","mtime":1639426937904}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucywgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgcHJvZHVjdDogew0KICAgICAgICAgICAgICAgIG5hbWU6IG51bGwsDQogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsDQogICAgICAgICAgICAgICAgcHJpY2U6IG51bGwsDQogICAgICAgICAgICAgICAgaW1hZ2U6IG51bGwsDQogICAgICAgICAgICAgICAgY2F0ZWdvcnk6IG51bGwsDQogICAgICAgICAgICB9LA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgdmFsaWRhdGlvbnM6IHsNCiAgICAgICAgcHJvZHVjdDogew0KICAgICAgICAgICAgbmFtZTogeyByZXF1aXJlZCB9LA0KICAgICAgICAgICAgZGVzY3JpcHRpb246IHsgcmVxdWlyZWQgfSwNCiAgICAgICAgICAgIHByaWNlOiB7IHJlcXVpcmVkIH0sDQogICAgICAgICAgICBjYXRlZ29yeTogeyByZXF1aXJlZCB9LA0KICAgICAgICB9LA0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLi4ubWFwU3RhdGUoWyJjYXRlZ29yaWVzIiwgInByb2R1Y3RJbWFnZXMiXSksDQogICAgICAgIGVkaXRNb2RlKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtc1sib3AiXSA9PSAiZWRpdCI7DQogICAgICAgIH0sDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC4uLm1hcE11dGF0aW9ucyhbInNldEN1cnJlbnRQYWdlIl0pLA0KICAgICAgICAuLi5tYXBBY3Rpb25zKFsiYWRkUHJvZHVjdCIsICJlZGl0UHJvZHVjdCJdKSwNCiAgICAgICAgb25GaWxlU2VsZWN0ZWQoZSkgew0KICAgICAgICAgICAgdGhpcy5wcm9kdWN0LmltYWdlID0gZS50YXJnZXQuZmlsZXNbMF07DQogICAgICAgIH0sDQogICAgICAgIG9uQ2hhbmdlKGUpIHsNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdC5jYXRlZ29yeSA9IGUudGFyZ2V0LnZhbHVlOw0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBoYW5kbGVQcm9kdWN0KCkgew0KICAgICAgICAgICAgdGhpcy4kdi4kdG91Y2goKTsNCiAgICAgICAgICAgIGlmICghdGhpcy4kdi4kaW52YWxpZCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3QgPSBuZXcgRm9ybURhdGEoKTsNCg0KICAgICAgICAgICAgICAgIHByb2R1Y3QuYXBwZW5kKCJOYW1lIiwgdGhpcy5wcm9kdWN0Lm5hbWUpOw0KICAgICAgICAgICAgICAgIHByb2R1Y3QuYXBwZW5kKCJEZXNjcmlwdGlvbiIsIHRoaXMucHJvZHVjdC5kZXNjcmlwdGlvbik7DQogICAgICAgICAgICAgICAgcHJvZHVjdC5hcHBlbmQoIlByaWNlIiwgdGhpcy5wcm9kdWN0LnByaWNlKTsNCiAgICAgICAgICAgICAgICBwcm9kdWN0LmFwcGVuZCgiSW1hZ2VVcGxvYWQiLCB0aGlzLnByb2R1Y3QuaW1hZ2UpOw0KICAgICAgICAgICAgICAgIHByb2R1Y3QuYXBwZW5kKA0KICAgICAgICAgICAgICAgICAgICAiQ2F0ZWdvcnlJZCIsDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdC5jYXRlZ29yeS5pZCB8fCB0aGlzLnByb2R1Y3QuY2F0ZWdvcnkNCiAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdE1vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5hcHBlbmQoIklkIiwgdGhpcy5wcm9kdWN0LmlkKTsNCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5hcHBlbmQoIkltYWdlIiwgdGhpcy5wcm9kdWN0LmltYWdlLm5hbWUpOw0KDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWRpdFByb2R1Y3QocHJvZHVjdCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRQcm9kdWN0KHByb2R1Y3QpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFBhZ2UoMSk7DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hZG1pbi9wcm9kdWN0cyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgaWYgKHRoaXMuZWRpdE1vZGUpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0LA0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmdldHRlcnMucHJvZHVjdEJ5SWQodGhpcy4kcm91dGUucGFyYW1zWyJpZCJdKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgIH0sDQp9Ow0K"},{"version":3,"sources":["ProductEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductEditor.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n    <div>\r\n        <h2 class=\"text-center p-2\">\r\n            {{ editMode ? \"Edit Product\" : \"Add Product\" }}\r\n        </h2>\r\n\r\n        <h4\r\n            v-if=\"$v.$invalid && $v.$dirty\"\r\n            class=\"bg-danger text-white text-center p-2\"\r\n        >\r\n            Values Required for All Fields!\r\n        </h4>\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"\">Name</label>\r\n            <input type=\"text\" class=\"form-control\" v-model=\"product.name\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"\">Description</label>\r\n            <textarea\r\n                class=\"form-control\"\r\n                v-model=\"product.description\"\r\n            ></textarea>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"\">Price</label>\r\n            <input type=\"text\" class=\"form-control\" v-model=\"product.price\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"\">Image</label>\r\n            <input type=\"file\" class=\"form-control\" @change=\"onFileSelected\" />\r\n\r\n            <p v-if=\"editMode\" class=\"mt-3\">\r\n                Current Image:\r\n                <img :src=\"productImages + product.image\" width=\"100\" />\r\n            </p>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"\">Category</label>\r\n            <select class=\"form-control\" @change=\"onChange\">\r\n                <option :value=\"null\">Choose a category</option>\r\n                <option\r\n                    v-for=\"(c, i) in categories\"\r\n                    :key=\"i\"\r\n                    :value=\"c.id\"\r\n                    :selected=\"c.id == product.categoryId\"\r\n                >\r\n                    {{ c.name }}\r\n                </option>\r\n            </select>\r\n        </div>\r\n\r\n        <div class=\"text-center\">\r\n            <router-link to=\"/admin/products\" class=\"btn btn-secondary m-1\"\r\n                >Cancel</router-link\r\n            >\r\n            <button class=\"btn btn-primary m-1\" @click=\"handleProduct\">\r\n                {{ editMode ? \"Edit\" : \"Add\" }}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nimport { required } from \"vuelidate/lib/validators\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            product: {\r\n                name: null,\r\n                description: null,\r\n                price: null,\r\n                image: null,\r\n                category: null,\r\n            },\r\n        };\r\n    },\r\n    validations: {\r\n        product: {\r\n            name: { required },\r\n            description: { required },\r\n            price: { required },\r\n            category: { required },\r\n        },\r\n    },\r\n    computed: {\r\n        ...mapState([\"categories\", \"productImages\"]),\r\n        editMode() {\r\n            return this.$route.params[\"op\"] == \"edit\";\r\n        },\r\n    },\r\n    methods: {\r\n        ...mapMutations([\"setCurrentPage\"]),\r\n        ...mapActions([\"addProduct\", \"editProduct\"]),\r\n        onFileSelected(e) {\r\n            this.product.image = e.target.files[0];\r\n        },\r\n        onChange(e) {\r\n            this.product.category = e.target.value;\r\n        },\r\n        async handleProduct() {\r\n            this.$v.$touch();\r\n            if (!this.$v.$invalid) {\r\n                const product = new FormData();\r\n\r\n                product.append(\"Name\", this.product.name);\r\n                product.append(\"Description\", this.product.description);\r\n                product.append(\"Price\", this.product.price);\r\n                product.append(\"ImageUpload\", this.product.image);\r\n                product.append(\r\n                    \"CategoryId\",\r\n                    this.product.category.id || this.product.category\r\n                );\r\n\r\n                if (this.editMode) {\r\n                    product.append(\"Id\", this.product.id);\r\n                    product.append(\"Image\", this.product.image.name);\r\n\r\n                    await this.editProduct(product);\r\n                } else {\r\n                    await this.addProduct(product);\r\n                }\r\n\r\n                this.setCurrentPage(1);\r\n                this.$router.push(\"/admin/products\");\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        if (this.editMode) {\r\n            Object.assign(\r\n                this.product,\r\n                this.$store.getters.productById(this.$route.params[\"id\"])\r\n            );\r\n        }\r\n    },\r\n};\r\n</script>\r\n"]}]}